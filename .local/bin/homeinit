#!/bin/sh
## homeinit

echo -e "\033[1m== homeinit  =="
echo -e "\033[1mInitialization of home folder"

echo -e "\033[0;32\033[1m==> System packages"
echo -e "\033[1m :: Installing all official packages"
pacman_list=""
if [ -f ~/.pkglists/arch-official ]; then
    pacman_list="$(cat ~/.pkglists/arch-official)"
fi
sudo pacman --noconfirm -S --needed base base-devel $pacman_list

echo -e "\033[1m :: Removing orphans"
pacman_list=$(pacman -Qdtq)
if [ -n "$pacman_list" ]; then
    sudo pacman --noconfirm -Rs "$pacman_list"
fi

echo -e "\033[0;32\033[1m==> 'temp' folder"
mkdir -pv "$HOME/temp"

echo -e "\033[0;32\033[1m==> 'projects' folder"
mkdir -pv "$HOME/projects"

echo -e "\033[0;32\033[1m==> emacs ELPA packages"
yes | emacs --batch -l ~/.emacs.d/first-installation.el

